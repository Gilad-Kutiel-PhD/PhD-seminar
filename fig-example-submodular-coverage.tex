\begin{tikzpicture}[x=2cm]

    \begin{scope}[yshift=.5cm,every node/.append style={rectangle}]
        \node[fill=blue](l1) at(0,0){1};
        \node[](l2) at(0,1){2};
        \node[fill=orange](l3) at(0,2){3};
    \end{scope}
    
    \fill[fill=blue] (l2.west) rectangle (l2.south east);
    \fill[fill=orange] (l2.west) rectangle (l2.north east);
    \node[rectangle] at(l2){};

    % r1
    \node[
        on=<2>{fill=blue}
    ](r1) at(2,0){1};

    % r2
    \node[
        on=<2>{fill=blue}
        ,on=<3>{fill=orange}
    ](r2) at(2,1){2};

    % r3
    \node[
        on=<2>{fill=blue}
        ,on=<3>{fill=orange}
    ](r3) at(2,2){3};
        
    % r4
    \node[
        on=<3>{fill=orange}
    ](r4) at(2,3){4};

    \onslide<4>{
        \twocolors{r2}
    }

    \onslide<5>{
        \twocolors{r1}
        \twocolors{r2}
        \twocolors{r3}
        \twocolors{r4}
    }

    \foreach \l \r in{
        1/1,1/3%
        ,2/2%
        ,3/3,3/4%
    }{
        \edge{l\l}{r\r};
    }

\end{tikzpicture}